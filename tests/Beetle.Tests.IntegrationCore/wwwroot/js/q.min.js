(function(n){if(typeof define=="function")define(n);else if(typeof exports=="object")n(void 0,exports);else if(typeof ses!="undefined")if(ses.ok())ses.makeQ=function(){return n(void 0,{})};else return;else n(void 0,Q={})})(function(n,t){"use strict";function ri(n){return ii(n)==="[object StopIteration]"||n instanceof ft}function ui(n,t){var i=[],r,u,f;try{i.push(n.toString())}catch(e){try{i.push("<error: "+e+">")}catch(o){i.push("<error>")}}for(r=0;r<t.length;r++)if(u=t[r],typeof u=="string")i.push(u);else{try{f=fi(u)}catch(e){try{f="<error: "+e+">"}catch(o){f="<error>"}}i.push("    at "+f)}return i.join("\n")}function fi(n){var t="",f,e,o,u;n.isNative()?t="native":n.isEval()?t="eval at "+n.getEvalOrigin():(f=n.getFileName(),f&&(t+=f,e=n.getLineNumber(),e!==null&&(t+=":"+e,o=n.getColumnNumber(),o&&(t+=":"+o)))),t||(t="unknown source");var i="",r=n.getFunction().name,s=!0,h=n.isConstructor(),c=!(n.isToplevel()||h);return c?(u=n.getMethodName(),i+=n.getTypeName()+".",r?(i+=r,u&&u!==r&&(i+=" [as "+u+"]")):i+=u||"<anonymous>"):h?i+="new "+(r||"<anonymous>"):r?i+=r:(i+=t,s=!1),s&&(i+=" ("+t+")"),i}function lt(n){var i=Error.prepareStackTrace,t;return Error.prepareStackTrace=function(n,t){return t.filter(function(n){var t=n.getFileName();return t!=="module.js"&&t!=="node.js"&&t!==at})},t=n.stack,Error.prepareStackTrace=i,t}function h(n,t,i){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+i+" instead."),n.apply(n,arguments)}}function r(){function c(i){if(t)return n=o(i),w(t,function(t,i){f(function(){n.promiseSend.apply(n,i)})},void 0),t=void 0,n}var t=[],n,h=ut(r.prototype),u=ut(e.prototype);return u.promiseSend=function(){var r=i(arguments);t?t.push(r):f(function(){n.promiseSend.apply(n,r)})},u.valueOf=function(){return t?u:n.valueOf()},Error.captureStackTrace&&Error.captureStackTrace(u,r),a(u),h.promise=u,h.resolve=c,h.reject=function(n){return c(s(n))},h}function ei(n){var t=r();return kt(n,void 0,t.resolve,t.reject).fail(t.reject),t.promise}function e(n,t,r,u){t===void 0&&(t=function(n){return s(new Error("Promise does not support operation: "+n))});var f=ut(e.prototype);return f.promiseSend=function(r,u){var o=i(arguments,2),e;try{e=n[r]?n[r].apply(f,o):t.apply(f,[r].concat(o))}catch(h){e=s(h)}u(e)},r&&(f.valueOf=r),u&&(f.exception=u),a(f),f}function y(n){return Object(n)!==n?n:n.valueOf()}function b(n){return n&&typeof n.promiseSend=="function"}function oi(n){return vt(n)||yt(n)}function vt(n){return!b(y(n))}function yt(n){return n=y(n),b(n)&&"exception"in n}function s(n){n=n||new Error;var t=e({when:function(t){if(t){var i=ti(k,this);i!==-1&&(d.splice(i,1),k.splice(i,1))}return t?t(n):s(n)}},function(){return s(n)},function(){return this},n);return k.push(t),d.push(n),t}function o(n){if(b(n))return n;if(n&&typeof n.then=="function"){var t=r();return n.then(t.resolve,t.reject),t.promise}return e({when:function(){return n},get:function(t){return n[t]},put:function(t,i){return n[t]=i},del:function(t){return delete n[t]},post:function(t,i){return n[t].apply(n,i)},apply:function(t,i){return n.apply(t,i)},fapply:function(t){return n.apply(void 0,t)},viewInfo:function(){function r(n){i[n]||(i[n]=typeof t[n])}for(var t=n,i={};t;)Object.getOwnPropertyNames(t).forEach(r),t=Object.getPrototypeOf(t);return{type:typeof n,properties:i}},keys:function(){return ct(n)}},void 0,function(){return n})}function si(n){return e({isDef:function(){}},function(){var t=i(arguments);return p.apply(void 0,[n].concat(t))},function(){return y(n)})}function pt(n,t){return n=o(n),t?e({viewInfo:function(){return t}},function(){var t=i(arguments);return p.apply(void 0,[n].concat(t))},function(){return y(n)}):p(n,"viewInfo")}function hi(n){return pt(n).when(function(t){var i,r;return i=t.type==="function"?function(){return g(n,void 0,arguments)}:{},r=t.properties||{},ct(r).forEach(function(t){r[t]==="function"&&(i[t]=function(){return et(n,t,arguments)})}),o(i)})}function u(n,t,i){function c(n){try{return t?t(n):n}catch(i){return s(i)}}function h(n){try{return i?i(n):s(n)}catch(t){return s(t)}}var u=r(),e=!1;return f(function(){o(n).promiseSend("when",function(n){e||(e=!0,o(n).promiseSend("when",function(n){u.resolve(c(n))},function(n){u.resolve(h(n))}))},function(n){e||(e=!0,u.resolve(h(n)))})}),u.promise}function ci(n,t,i){return u(n,function(n){return t.apply(void 0,n)},i)}function li(n){return function(){function t(n,t){var o;try{o=r[n](t)}catch(e){return ri(e)?e.value:s(e)}return u(o,i,f)}var r=n.apply(this,arguments),i=t.bind(t,"send"),f=t.bind(t,"throw");return i()}}function ai(n){throw new ft(n);}function wt(n){return function(t){var r=i(arguments,1);return p.apply(void 0,[t,n].concat(r))}}function p(n,t){var u=r(),e=i(arguments,2);return n=o(n),f(function(){n.promiseSend.apply(n,[t,u.resolve].concat(e))}),u.promise}function bt(n,t,i){var u=r();return n=o(n),f(function(){n.promiseSend.apply(n,[t,u.resolve].concat(i))}),u.promise}function c(n){return function(t){var r=i(arguments,1);return bt(t,n,r)}}function kt(n,t){var r=i(arguments,2);return g(n,t,r)}function dt(n){var t=i(arguments,1);return nt(n,t)}function vi(n,t){var r=i(arguments,2);return function(){var u=r.concat(i(arguments));return g(n,t,u)}}function yi(n){var t=i(arguments,1);return function(){var r=t.concat(i(arguments));return nt(n,r)}}function gt(n){return u(n,function(n){var i=n.length,t;return i===0?o(n):(t=r(),w(n,function(r,f,e){u(f,function(r){n[e]=r,--i==0&&t.resolve(n)}).fail(t.reject)},void 0),t.promise)})}function pi(n){return u(n,function(n){return u(gt(ht(n,function(n){return u(n,it,it)})),function(){return ht(n,o)})})}function wi(n,t){return u(n,void 0,t)}function bi(n,t){return u(n,function(n){return u(t(),function(){return n})},function(n){return u(t(),function(){return s(n)})})}function ki(n){u(n,void 0,function(t){f(function(){if(Error.captureStackTrace&&"stack"in t){var i=lt(t),r=lt(n),u=i.concat("From previous event:",r);t.stack=ui(t,u)}throw t;})})}function di(n,t){var i=r(),f=setTimeout(function(){i.reject(new Error("Timed out after "+t+" ms"))},t);return u(n,function(n){clearTimeout(f),i.resolve(n)},i.reject),i.promise}function gi(n,t){t===void 0&&(t=n,n=void 0);var i=r();return setTimeout(function(){i.resolve(n)},t),i.promise}function tt(n,t,i){return ni(n,t).apply(void 0,i)}function nr(n,t){var r=i(arguments,2);return tt(n,t,r)}function ni(n){if(arguments.length>1){var t=arguments[1],u=i(arguments,2),f=n;n=function(){var n=u.concat(i(arguments));return f.apply(t,n)}}return function(){var t=r(),u=i(arguments);return u.push(t.makeNodeResolver()),nt(n,u).fail(t.reject),t.promise}}function tr(n,t,i){return tt(n[t],n,i)}function ir(n,t){var r=i(arguments,2);return tt(n[t],n,r)}var it=function(){},a=Object.freeze||it,f,l,rt,ft,at,k,d,et,g,nt;if(typeof cajaVM!="undefined"&&(a=cajaVM.def),typeof process!="undefined")f=process.nextTick;else if(typeof msSetImmediate=="function")f=msSetImmediate.bind(window);else if(typeof setImmediate=="function")f=setImmediate;else if(typeof MessageChannel!="undefined"){var ot=new MessageChannel,v={},st=v;ot.port1.onmessage=function(){v=v.next;var n=v.task;delete v.task,n()},f=function(n){st=st.next={task:n},ot.port2.postMessage(0)}}else f=function(n){setTimeout(n,0)};Function.prototype.bind?(rt=Function.prototype.bind,l=rt.bind(rt.call)):l=function(n){return function(){return n.call.apply(n,arguments)}};var i=l(Array.prototype.slice),w=l(Array.prototype.reduce||function(n,t){var i=0,r=this.length;if(arguments.length===1)do{if(i in this){t=this[i++];break}if(++i>=r)throw new TypeError;}while(1);for(;i<r;i++)i in this&&(t=n(t,this[i],i));return t}),ti=l(Array.prototype.indexOf||function(n){for(var t=0;t<this.length;t++)if(this[t]===n)return t;return-1}),ht=l(Array.prototype.map||function(n,t){var i=this,r=[];return w(i,function(u,f,e){r.push(n.call(t,f,e,i))},void 0),r}),ut=Object.create||function(n){function t(){}return t.prototype=n,new t},ct=Object.keys||function(n){var t=[],i;for(i in n)t.push(i);return t},ii=Object.prototype.toString;ft=typeof ReturnValue!="undefined"?ReturnValue:function(n){this.value=n},Error.captureStackTrace&&(at=function(){var n,t=Error.prepareStackTrace;return Error.prepareStackTrace=function(t,i){n=i[0].getFileName()},(new Error).stack,Error.prepareStackTrace=t,n}()),t.nextTick=f,t.defer=r,r.prototype.makeNodeResolver=function(){var n=this;return function(t,r){t?n.reject(t):arguments.length>2?n.resolve(i(arguments,1)):n.resolve(r)}},r.prototype.node=h(r.prototype.makeNodeResolver,"node","makeNodeResolver"),t.promise=ei,t.makePromise=e,e.prototype.then=function(n,t){return u(this,n,t)},w(["isResolved","isFulfilled","isRejected","when","spread","send","get","put","del","post","invoke","keys","apply","call","bind","fapply","fcall","fbind","all","allResolved","view","viewInfo","timeout","delay","catch","finally","fail","fin","end"],function(n,r){e.prototype[r]=function(){return t[r].apply(t,[this].concat(i(arguments)))}},void 0),e.prototype.toSource=function(){return this.toString()},e.prototype.toString=function(){return"[object Promise]"},a(e.prototype),t.nearer=y,t.isPromise=b,t.isResolved=oi,t.isFulfilled=vt,t.isRejected=yt,k=[],d=[],typeof window!="undefined"&&window.console&&console.log("Should be empty:",d),t.reject=s,t.begin=o,t.resolve=o,t.ref=h(o,"ref","resolve"),t.master=si,t.viewInfo=pt,t.view=hi,t.when=u,t.spread=ci,t.async=li,t["return"]=ai,t.sender=h(wt,"sender","dispatcher"),t.Method=h(wt,"Method","dispatcher"),t.send=h(p,"send","dispatch"),t.dispatch=bt,t.dispatcher=c,t.get=c("get"),t.put=c("put"),t["delete"]=t.del=c("del"),et=t.post=c("post"),t.invoke=function(n,t){var r=i(arguments,2);return et(n,t,r)},g=t.apply=h(c("apply"),"apply","fapply"),nt=t.fapply=c("fapply"),t.call=h(kt,"call","fcall"),t["try"]=dt,t.fcall=dt,t.bind=h(vi,"bind","fbind"),t.fbind=yi,t.keys=c("keys"),t.all=gt,t.allResolved=pi,t["catch"]=t.fail=wi,t["finally"]=t.fin=bi,t.end=ki,t.timeout=di,t.delay=gi,t.napply=tt,t.ncall=nr,t.nbind=ni,t.npost=tr,t.ninvoke=ir,a(t)});
//@ sourceMappingURL=q.min.js.map